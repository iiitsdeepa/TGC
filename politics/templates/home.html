{% extends "newbase.html" %}
{% block content %}

<script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">

    google.load("feeds", "1");

    function initialize() {
      var feed = new google.feeds.Feed("http://rss.nytimes.com/services/xml/rss/nyt/Politics.xml");
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("feed");
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            div.appendChild(document.createTextNode(entry.title));
            container.appendChild(div);
          }
        }
      });
    }
    google.setOnLoadCallback(initialize)
    </script>

<input type='hidden' id="page-statename" value="{{hrstatename}}">
<div id='pagenav'>
	<div id='personalize-option' class='pagenav-option' onclick="javascript:scroller('news', 'tab');return false;">News</div>
	<div id='partycomp-option' class='pagenav-option' onclick="javascript:scroller('election','tab');return false;">2016 Election</div>
	<div id='currentpolls-option' class='pagenav-option' onclick="javascript:scroller('reps','tab');return false;">My Representatives</div>
</div>

<div id='news' class='tab'>
	<div id="feed"></div>
</div>

<div id='election' class='tab'>
	<h1 class='tab-title'>The 2016 Election</h1>
	<div class='cstandings-wrapper'>
		<h1 class='cstandings-title'>Current Standings</h1>
		<div class='dstandings cstanding'>
			<h2 class='cstanding-title'>Democrats</h2>
			<div class='cstanding-basicinfo'>
				<h3>Delegates won</h3>
				2,383 needed for nomination out of 4,189 total
			</div>
			<div id='dstanding-graph-wrapper' class='cstanding-graph-wrapper'></div>
			<div class='cstanding-processinfo'>
				<h3>The Process</h3>
				The Democratic primary has two types of delegates that are awarded to the candidates<br><br>
				<b>Pledged Delegates:</b> Delegates that vote with primary election results<br>
				<b>Superdelegates:</b> Delegates that do not vote with primary election results
			</div>
		</div>
		<div class='rstandings cstanding'>
			<h2 class='cstanding-title'>Republicans</h2>
			<div class='cstanding-basicinfo'>
				<h3>Delegates won</h3>
				1,237 needed for nomination out of 2,340 total
			</div>
			<div id='rstanding-graph-wrapper' class='cstanding-graph-wrapper'></div>
			<div class='cstanding-processinfo'>
				<h3>The Process</h3>
				The Republican primary only has pledged delegates that vote as per the primary election, unlike the Democratic primary.
			</div>
		</div>
		<h1 class='cstandings-title'>Current National Polls</h1>
		<div class='dpoll cstanding'>
			<h2 class='cstanding-title'>Democrats</h2>
			<div id='dpoll-graph-wrapper' class='cstanding-graph-wrapper'></div>
		</div>
		<div class='rpoll cstanding'>
			<h2 class='cstanding-title'>Republicans</h2>
			<div id='rpoll-graph-wrapper' class='cstanding-graph-wrapper'></div>
		</div>
	</div>
</div>

<div id='reps' class='tab'>
	<div id='demo_wrapper'>
		<h2>Find Your Representatives</h2>
		<div class='findform_wrapper z-index-1'>
			<div class='findform_wrapper'>
				<div id='location_data' class="dformbutton" onclick="javascript:useLocation();return false;">Find Using Your Location</div>
				<span style='font-size:250%;margin: 0 auto;margin-top:30px'>-OR-</span>
				<div id='use_address' class='districtentry'>
					<form method='post' name='districtform' id='districtform' onsubmit="javascript:handleZip();return false;">
						<div class='formhead'>Enter Street Address</div>
			  			<input id='address' type="text" name="address" placeholder='Street Address' style='width:calc(100% - 4px)'><br>
			  			<input id='city' type="text" name="city" placeholder='City' style='width:calc(50% - 5px)'>
			  			<input id='state' type="text" name="state" placeholder='State Abbreviation (XX)' style='width:calc(50% - 7px)'>
					</form>
					<div id='zip_submit' class='z-depth-1 dformbutton' onclick="javascript:useAddress();return false;">Find Using Your Address</div>
				</div>
			</div>
			<span id='privacy-statement' style='font-size:80%'>*Privacy: We won't save your location data. When you use these buttons it will be single use to find your district.</span>
		</div>

		<div id='demo_content' class='z-index-1'>
			<div id='statdescription'>
				<div id='statdata'>
					<!--<span id='stattext'>Display Your Reps</span>-->
				</div>
			</div>
			<div id='reps_container'>
				
				<div id='reps_slider' value='leaders'>
					<div id='hr_wrapper' class='rep_wrapper z-index-1'>
						<h4>{{hrtitle}}</h4>
						<div id='hr_head_wrapper' class='head_wrapper'>
							<div id='hrpic' class='reppic_wrapper'>
								<img src='/images/headshots/{{hrpic}}.png' class='rep-pic'>
							</div>
							<div class='basic_info'>
								<div id='hrname' class='repname'>{{hrname}}</div>
								<div id='hrparty' class='repparty'>{{hrparty}}</div>
								<div id='hryears' class='repyears'>In office since {{hrfyio}}</div>
								<div class='partypic_wrapper'></div>
							</div>
						</div>
						<div class='desrep_info'>
							<table class='tabledisplay'>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{hrstat1}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{hrstat2}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{hrstat3}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{hrstat4}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{hrstat5}}</td> 
								</tr>
							</table>
						</div>
						<div class='mobrep_spacer'></div>
						<div class='mobrep_info'>
							<table>
								<tr class='mtrow'>
									<td class='msname'>Party Loyalty</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 2 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 3 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 4 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 5 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
							</table>
						</div>
					</div>

					<div id='ss_wrapper' class='rep_wrapper z-index-1'>
						<h4>{{sstitle}}</h4>
						<div id='ss_head_wrapper' class='head_wrapper'>
							<div id='sspic' class='reppic_wrapper'>
								<img src='/images/headshots/{{sspic}}.png' class='rep-pic'>
							</div>
							<div class='basic_info'>
								<div id='ssname' class='repname'>{{ssname}}</div>
								<div id='ssparty' class='repparty'>{{ssparty}}</div>
								<div id='ssyears' class='repyears'>In office since {{ssfyio}}</div>
								<div class='partypic_wrapper'></div>
							</div>
						</div>
						<div class='desrep_info'>
							<table class='tabledisplay'>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{ssstat1}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{ssstat2}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{ssstat3}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{ssstat4}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{ssstat5}}</td> 
								</tr>
							</table>
						</div>
						<div class='mobrep_spacer'></div>
						<div class='mobrep_info'>
							<table>
								<tr class='mtrow'>
									<td class='msname'>Party Loyalty</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 2 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 3 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 4 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 5 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
							</table>
						</div>
					</div>
					<div id='js_wrapper' class='rep_wrapper z-index-1'>
						<h4>{{jstitle}}</h4>
						<div id='js_head_wrapper' class='head_wrapper'>
							<div id='jspic' class='reppic_wrapper'>
								<img src='/images/headshots/{{jspic}}.png' class='rep-pic'>
							</div>
							<div class='basic_info'>
								<div id='jsname' class='repname'>{{jsname}}</div>
								<div id='jsparty' class='repparty'>{{jsparty}}</div>
								<div id='jsyears' class='repyears'>In office since {{jsfyio}}</div>
								<div class='partypic_wrapper'></div>
							</div>
						</div>
						<div class='desrep_info'>
							<table class='tabledisplay'>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{jsstat1}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{jsstat2}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{jsstat3}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='erow drepstat'>{{jsstat4}}</td> 
								</tr>
								<tr class='dtrow'>
									<td class ='orow drepstat'>{{jsstat5}}</td> 
								</tr>
							</table>
						</div>
						<div class='mobrep_spacer'></div>
						<div class='mobrep_info'>
							<table>
								<tr class='mtrow'>
									<td class='msname'>Party Loyalty</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 2 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 3 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 4 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
								<tr class='mtrow'>
									<td class='msname'>Stat 5 Name</td>
									<td class ='mrepstat'>X%</td> 
								</tr>
							</table>
						</div>
					</div>
				</div>
			</div>
			<div id='repsheader_wrapper'>
				<table class='tabledisplay'>
					<tr id='head1' class='orow sporow' onmouseover="javascript:rhover('head1');return false;">
						<td class='sname'>{{stat1name}}</td>
					</tr>
					<tr id='head2' class='erow plrow' onmouseover="javascript:rhover('head2');return false;">
						<td class='sname'>{{stat2name}}</td>
					</tr>
					<tr id='head3' class='orow' onmouseover="javascript:rhover('head3');return false;">
						<td class='sname'>{{stat3name}}</td>
					</tr>
					<tr id='head4' class='erow' onmouseover="javascript:rhover('head4');return false;">
						<td class='sname'>{{stat4name}}</td>
					</tr>
					<tr id='head5' class='orow' onmouseover="javascript:rhover('head5');return false;">
						<td class='sname'>{{stat5name}}</td>
					</tr>
				</table>
			</div>
			<div id='change_button_wrapper'>
				<span id='changetext' class='dformbutton' onclick="javascript:loadStats();return false;">Change Stats</span>
			</div>
			<div id='replinks_wrapper'>
				<div class='replinks'>
					<a href='{{hrwebsite}}' class='rep-link'target='blank'>Website</a>
					<div class='rep-link_spacer'></div>
					<a href='http://facebook.com/{{hrfbid}}' class='rep-link'target='blank'>Facebook</a>
					<div class='rep-link_spacer'></div>
					<a href='http://twitter.com/{{hrtwid}}' class='rep-link'target='blank'>Twitter</a>
				</div>
				<div class='replinks'>
					<a href='{{sswebsite}}' class='rep-link'target='blank'>Website</a>
					<div class='rep-link_spacer'></div>
					<a href='http://facebook.com/{{ssfbid}}' class='rep-link'target='blank'>Facebook</a>
					<div class='rep-link_spacer'></div>
					<a href='http://twitter.com/{{sstwid}}' class='rep-link'target='blank'>Twitter</a>
				</div>
				<div id='last_replink' class='replinks'>
					<a href='{{jswebsite}}' class='rep-link'target='blank'>Website</a>
					<div class='rep-link_spacer'></div>
					<a href='http://facebook.com/{{jsfbid}}' class='rep-link'target='blank'>Facebook</a>
					<div class='rep-link_spacer'></div>
					<a href='http://twitter.com/{{jstwid}}' class='rep-link'target='blank'>Twitter</a>
				</div>
			</div>
			<div id='change_selector_wrapper' class='z-index-1'>
					<div class='change_header'><h3>Select 5 legislator statictics to display from the list below.</h3></div>
					<div id='change_checkbox_wrapper'>
						<div class='change_checkbox'>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='1'>Party Loyalty</div>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='2'>Legislative Index</div>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='3'>Bills Sponsored</div>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='4'>Bills Cosponsored</div>
						<!--</div>
						<div class='change_checkbox'>-->
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='5'>Percent of Votes Missed</div>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='6'>Number of Sponsored and Cosponsored Bills Enacted</div>
							<div class='change-check'><input type='checkbox' class='leg-stats' name='leg-stats' value='7'>Effectiveness</div>
				        </div>
					</div>
					<div id='change_submit_wrapper'>
						<span id='change_submit_button' class='dformbutton' onclick="javascript:submitStats();return false;">Submit</span>
						<span id='change_cancel_button' class='dformbutton' onclick="javascript:cancelStats();return false;">Cancel</span>
					</div>
				</div>
		</div>
	</div>
</div>

<div id='back-to-top' onclick="javascript:scrollTo('top');return false;">Back To Top</div>

<link rel='stylesheet' href='css/demo.css'/>
<script type="text/javascript" src="/js/demo.js"></script>

<script>
var dpresults;
var rpresults;
google.charts.load('current', {'packages':['corechart']});
google.charts.setOnLoadCallback(loadData);
function loadData(){
	$.post('/vishandle', {'visualization':'dpresults'},function(data){
		chart_data = $.parseJSON(data);
		drawBarChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'rpresults'},function(data){
		chart_data = $.parseJSON(data);
		drawBarChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'dnpolls'},function(data){
		chart_data = $.parseJSON(data);
		drawLineChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'rnpolls'},function(data){
		chart_data = $.parseJSON(data);
		drawLineChart(chart_data)
		startState()
	})

}
function drawBarChart(d) {
	console.log(d['data'])
    var chart1_data = new google.visualization.DataTable(d['data']);
    var chart1_options = {
        title: d['title'],
    };

    var chart1_chart = new google.visualization.ColumnChart(document.getElementById(d['element']));
    chart1_chart.draw(chart1_data, chart1_options);
}
function drawLineChart(d){
	console.log(d['data'])
    var chart1_data = new google.visualization.DataTable(d['data']);
    var chart1_options = {
        title: d['title'],
    };

    var chart1_chart = new google.visualization.LineChart(document.getElementById(d['element']));
    chart1_chart.draw(chart1_data, chart1_options);
}

</script>

<style>
.cstandings-wrapper{display:flex;flex-wrap:wrap;border:solid 2px #eee;}
.cstandings-title{width:100%;text-align:center;}
.cstanding{width:calc(50% - 1px);}
.cstanding-title{text-align:center;margin:0;padding:20px 0;border-bottom:solid 2px #eee;border-top:solid 2px #eee;}
.cstanding-basicinfo{padding:20px;}
.cstanding h3{margin:0 0 10px 0;}
.dstandings{border-right:solid 1px #eee;}
.rstandings{border-left:solid 1px #eee;}
.cstanding-graph-wrapper{height:300px;margin:0 20px;border-bottom:solid 1px #d9d9d9;}
.cstanding-processinfo{margin:20px;}
</style>
{% endblock %}