{% extends "newbase.html" %}
{% block content %}
<input type='hidden' id="page-statename" value="{{hrstatename}}">
<div id='pagenav'>
	<div class='pagenav-option' onclick="javascript:electionScroller();return false;">Current Standings</div>
	<div class='pagenav-option' onclick="javascript:scroller('candidates','tab');return false;">Candidates</div>
	<div class='pagenav-option' onclick="javascript:scroller('map','tab');return false;">Map</div>
</div>

<link rel='stylesheet' href='css/demo.css'/>
<script type="text/javascript" src="/js/demo.js"></script>

<div id='standings' class='tab'>
	<h1 class='tab-title'>The 2016 Election</h1>
	<div class='cstandings-wrapper'>
		<h1 class='cstandings-title'>Current Standings</h1>
		<div class='dstandings cstanding'>
			<h2 class='cstanding-title'>Democratic Primary</h2>
			<div class='cstanding-basicinfo'>
				<!--<h3>Delegates won</h3>-->
				2,383 needed for nomination out of 4,762 total<br>
				3,286 delegates remaining
			</div>
			<div id='dstanding-graph-wrapper' class='cstanding-graph-wrapper'></div>
			<div class='cstanding-processinfo'>
				<h3>Graph Key</h3>
				<b>85% - Pledged Delegates:</b> Delegates that vote according to their primary results<br>
				<b>15% - Superdelegates:</b> Delegates that can cast their vote for any candidate 
			</div>
		</div>
		<div class='rstandings cstanding'>
			<h2 class='cstanding-title'>Republican Primary</h2>
			<div class='cstanding-basicinfo'>
				<!--<h3>Delegates won</h3>-->
				1,237 needed for nomination out of 2,472 total<br>
				1,777 delegates remaining
			</div>
			<div id='rstanding-graph-wrapper' class='cstanding-graph-wrapper'></div>
			<div class='cstanding-processinfo'>
				<h3>Graph Key</h3>
				<b>93% - Bound delegates:</b> vote according to their state’s primary results<br>
				<b>7% - Unbound delegates:</b>  can switch candidates, regardless of their state’s primary results
			</div>
		</div>
		<div id='learn_button_wrapper'>
			<span id='learnmore' class='dformbutton' onclick="javascript:learnMore();return false;">Learn More About The Election Process</span>
		</div>
		<h1 class='cstandings-title'>Current National Polls</h1>
		<div id='form_wrapper'>
			<form id='graph-form' method='post'>
				<div id='form-one'>
					<div id='length_title'>Select Time Length (Shorter -> Longer): </div>
					<div id='smoothness_wrapper'><input id='timelength' type="range" min="0" max="100" value="0" step="25" /></div>
				</div>
				<div id='form-two'>
					<div id='smooth_title'>Select Line Smoothness (Less -> More Smooth): </div>
					<div id='timelength_wrapper'><input id='smoothness' type="range" min="0" max="100" value="25" step="25" /></div>
				</div>
				<div id='graph_submit_wrapper'><input id='graph_submit' type="button" onclick="javascript:submitGraph();return false;" value='Submit'></div>
			</form>
		</div>
		<div class='dpoll cstanding'>
			<h2 class='cstanding-title'>Democrats</h2>
			<div id='dpoll-graph-wrapper' class='cstanding-graph-wrapper2'></div>
		</div>
		<div class='rpoll cstanding'>
			<h2 class='cstanding-title'>Republicans</h2>
			<div id='rpoll-graph-wrapper' class='cstanding-graph-wrapper2'></div>
		</div>
	</div>
</div>

<div id='candidates' class='tab'>
	<div class='incomplete-tab'>
		<div class='incomp-tab incomp-pre'>
			<h1 class='incomptab-title'>This section can only be viewed by our currrent members</h1>
			<h2>TGC is currently in development and we're looking for new testers</h2>
			<ul>
				<li>Get exclusive access to new features</li>
				<li>Stay up to date with development</li>
				<li>Direct contact our team so we can make the best possible service for you</li>
			</ul>
			<form id='esfform' name='esfform' onsubmit="javascript:submitESF();return false;">
				<input type='text' name='esfemail' id='esfemail' class='medium-text-input' placeholder='Enter Email'>
				<div id='esfsubmit' class='bluebutton button' onclick="javascript:submitESF();return false;">Become a tester now</div>
			</form>
		</div>
		<div class='incomp-tab incomp-post'>
			<h2>Thanks for signing up! We just sent you an email</h2>
		</div>
	</div>
</div>

<div id='map' class='tab'>
	<h1 class='tab-title'>Map</h1>
		<div class='incomplete-tab'>
		<div class='incomp-tab incomp-pre'>
			<h1 class='incomptab-title'>This section can only be viewed by our currrent members</h1>
			<h2>TGC is currently in development and we're looking for new testers</h2>
			<ul>
				<li>Get exclusive access to new features</li>
				<li>Stay up to date with development</li>
				<li>Direct contact our team so we can make the best possible service for you</li>
			</ul>
			<form id='esfform' name='esfform' onsubmit="javascript:submitESF();return false;">
				<input type='text' name='esfemail' id='esfemail' class='medium-text-input' placeholder='Enter Email'>
				<div id='esfsubmit' class='bluebutton button' onclick="javascript:submitESF();return false;">Become a tester now</div>
			</form>
		</div>
		<div class='incomp-tab incomp-post'>
			<h2>Thanks for signing up! We just sent you an email</h2>
		</div>
	</div>

</div>

<div id='back-to-top' onclick="javascript:scrollTo('top');return false;">Back To Top</div>

<script>
var dpresults;
var rpresults;
var toelection = 0;
startState()
google.charts.load('current', {'packages':['corechart']});
//google.charts.setOnLoadCallback(loadData);
function loadData(){
	$.post('/vishandle', {'visualization':'dpresults'},function(data){
		chart_data = $.parseJSON(data);
		drawBarChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'rpresults'},function(data){
		chart_data = $.parseJSON(data);
		drawBarChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'dnpolls'},function(data){
		chart_data = $.parseJSON(data);
		drawLineChart(chart_data)
	})
	$.post('/vishandle', {'visualization':'rnpolls'},function(data){
		chart_data = $.parseJSON(data);
		drawLineChart(chart_data)
	})
}
function electionScroller(){
	scroller('standings','tab')
	if (toelection == 0){
		google.charts.setOnLoadCallback(loadData);
		toelection++;
	}
}
function drawBarChart(d) {
	console.log(d['data'])
    var chart1_data = new google.visualization.DataTable(d['data']);
    var chart1_options = {
        title: d['title'],
    };

    var chart1_chart = new google.visualization.ColumnChart(document.getElementById(d['element']));
    chart1_chart.draw(chart1_data, chart1_options);
}
function drawLineChart(d){
	console.log(d['data'])
    var chart1_data = new google.visualization.DataTable(d['data']);
    var chart1_options = {
        title: d['title'],
    };

    var chart1_chart = new google.visualization.LineChart(document.getElementById(d['element']));
    chart1_chart.draw(chart1_data, chart1_options);
}

</script>

<style>
.cstanding-graph-wrapper{height:300px;margin:0 20px;border-bottom:solid 1px #d9d9d9;}
.cstanding-graph-wrapper2{height:400px;margin:0 20px;border-bottom:solid 1px #d9d9d9;}
</style>
{% endblock %}